<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Your Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .report-card { border: 2px solid #0d6efd; padding: 20px; border-radius: 10px; background: white; }

        /* --- MAGIC PRINT CSS --- */
        @media print {
            /* 1. Hide buttons and navigation */
            .btn, .no-print {
                display: none !important;
            }

            /* 2. Reset container width to fill the paper */
            .container, .report-card {
                width: 100% !important;
                max-width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                border: none !important; /* Remove blue border for print */
                box-shadow: none !important; /* Remove shadow */
            }

            /* 3. Force columns to stay side-by-side */
            /* Bootstrap sometimes stacks them on print, this forces them back */
            .row {
                display: flex !important;
                flex-direction: row !important;
            }
            .col-md-6 {
                width: 50% !important;
                float: left !important;
            }

            /* 4. Ensure text is black for clarity */
            body {
                color: black !important;
                background-color: white !important;
            }
        }
    </style>
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="report-card shadow-lg">

        <div class="text-center mb-4">
            <h2 class="text-primary">UNIVERSITY RESULT PORTAL</h2>
            <h5 class="text-muted">Statement of Marks</h5>
        </div>
        <hr>

        <div class="row mb-4">
            <div class="col-md-6">
                <p><strong>Name:</strong> <span th:text="${student.name}"></span></p>
                <p><strong>Roll No:</strong> <span th:text="${student.rollNumber}"></span></p>
                <p><strong>Father's Name:</strong> <span th:text="${student.fatherName}"></span></p>
                <p><strong>Mother's Name:</strong> <span th:text="${student.motherName}"></span></p>
            </div>

            <div class="col-md-6 text-end">
                <p><strong>DOB:</strong> <span th:text="${student.dateOfBirth}"></span></p>
                <p><strong>Course:</strong> <span th:text="${student.course}"></span></p>
                <p><strong>Gender:</strong> <span th:text="${student.gender}"></span></p>
                <p><strong>Phone:</strong> <span th:text="${student.phoneNumber}"></span></p>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <p><strong>Address:</strong> <span th:text="${student.address}"></span></p>
            </div>
        </div>

        <div th:each="result : ${results}" class="mb-5">
            <div class="card">
                <div class="card-header bg-dark text-white d-flex justify-content-between">
                    <span th:text="${result.semester}"></span>
                    <span>Status: <strong th:text="${result.passOrFailed}"
                                          th:class="${result.passOrFailed == 'PASS' ? 'text-success' : 'text-danger'}"></strong></span>
                </div>
                <div class="card-body p-0">
                    <table class="table table-bordered mb-0">
                        <thead class="table-secondary">
                        <tr>
                            <th>Subject Code</th>
                            <th>Subject Name</th>
                            <th>Max Marks</th>
                            <th>Obtained</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="sub : ${result.subjectList}">
                            <td th:text="${sub.subjectCode}"></td>
                            <td th:text="${sub.subjectName}"></td>
                            <td th:text="${sub.maxMarks}"></td>
                            <td th:text="${sub.obtainedMarks}"></td>
                        </tr>
                        </tbody>
                        <tfoot class="table-light fw-bold">
                        <tr>
                            <td colspan="2" class="text-end">Total:</td>
                            <td th:text="${result.totalMaxMarks}"></td>
                            <td th:text="${result.totalObtained}"></td>
                        </tr>
                        <tr>
                            <td colspan="3" class="text-end">Percentage:</td>
                            <td th:text="${(result.totalObtained * 100.0) / result.totalMaxMarks} + '%'"></td> </tr>
                        <tr>
                            <td colspan="3" class="text-end">Grade:</td>
                            <td th:text="${result.grade}"></td>
                        </tr>

                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <button onclick="window.print()" class="btn btn-outline-primary">Print Result</button>
            <a href="/" class="btn btn-link">Back to Search</a>
        </div>

    </div>
</div>

</body>
</html>